<h2>Add an exam</h2>
<form method="POST">
    <div>
        <label>Module ID:</label>
        <select name="module-id" id="module-id"></select>
    </div>
    <div>
        <label>Exam date:</label>
        <input type="date" name="exam-date"/>
    </div>
    <div>
        <label> Exam deadline: </label>
        <input type="date" name="exam-deadline"/>
    </div>
    <div>
        <label> Exam start time: </label>
        <input type="time" name="exam-start"/>
    </div>
    <div>
        <label> Exam end time: </label>
        <input type="time" name="exam-end"/>
    </div>
    <input type="submit" value="Submit"/>
</form>

<script>
    function modulesToOptions(modules) {
        $.ajax({
            url: '/view/semester/',
            type: 'POST',
            success: function (semesters) {
                var options = "";
                for (var i = 0; i < semesters.length; i++) {
                    var semesterLabel = "Sem " + semesters[i].id + " (" + semesters[i].start + " - " + semesters[i].end + ")";
                    options += "<optgroup label='" + semesterLabel + "'>";
                    for (var j = 0; j < modules.length; j++) {
                        if (modules[j].semester.slice(9) == semesters[i].id)
                            options += "<option value='" + modules[j].id + "'>" + modules[j].name + "</option>"
                    }
                    options += "</optgroup>";
                }
                $("#module-id").html(options);
            },
            error: displayError
        });
    }

    $(document).ready(
        function () {
            $.ajax({
                url: '/view/module/',
                type: 'POST',
                success: modulesToOptions,
                error: displayError
            })
        }
    )
</script>